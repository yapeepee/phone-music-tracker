# 🎵 練習夥伴配對系統 - 功能驗證說明

## 📝 測試帳號資料

### 學生帳號
| 姓名 | Email | 密碼 | 時區 |
|------|-------|------|------|
| Alice Chen | alice@example.com | testpass123 | 紐約 |
| Bob Smith | bob@example.com | testpass123 | 倫敦 |
| Carol Johnson | carol@example.com | testpass123 | 紐約 |

### 老師帳號
| 姓名 | Email | 密碼 |
|------|-------|------|
| Dr. David Lee | teacher@example.com | testpass123 |

## 🎼 目前練習曲目分配

- **Alice**: 月光奏鳴曲、給愛麗絲、夜曲 Op.9 No.2、Gymnopédie No.1
- **Bob**: 月光奏鳴曲、月光曲
- **Carol**: 給愛麗絲、C大調前奏曲、Gymnopédie No.1、River Flows in You

## ✅ 已實現功能

### 1. 練習夥伴探索 (Discovery)
- 自動找出練習相同曲目的用戶
- 可按曲目、技能等級過濾
- 顯示時區差異

### 2. 配對請求 (Match Request)
- 發送練習邀請給其他用戶
- 可附加個人訊息
- 防止重複請求

### 3. 即時通知 (Notifications)
- 收到新的練習邀請通知
- 邀請被接受/拒絕通知
- 包含曲目名稱和訊息內容

### 4. 時區轉換 (Timezone Conversion)
- 自動計算兩地時差
- 顯示雙方各自的當地時間
- 找出可共同練習的時段

### 5. 可用時間管理 (Availability)
- 設定每週固定練習時間
- 支援不同時區設定
- 自動匹配重疊時段

### 6. 個人偏好設定 (Preferences)
- 設定是否接受配對
- 語言偏好
- 溝通方式偏好
- 最多配對人數限制

## 🚀 快速測試方法

### 方法一：使用 Python 測試腳本
```bash
# 執行自動化測試
python3 test_practice_partners.py
```

### 方法二：使用 curl 命令測試
```bash
# 1. 登入取得 token
curl -X POST "http://localhost:8000/api/v1/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"email": "alice@example.com", "password": "testpass123"}'

# 2. 探索練習夥伴
curl -X POST "http://localhost:8000/api/v1/practice-partners/discover" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{}'
```

### 方法三：使用測試指南
查看 `PRACTICE_PARTNER_TESTING_GUIDE.md` 獲得詳細的測試步驟

## 📊 預期測試結果

### 探索功能
- Alice 可找到 Bob (月光奏鳴曲) 和 Carol (給愛麗絲、Gymnopédie)
- Bob 可找到 Alice (月光奏鳴曲)
- Carol 可找到 Alice (給愛麗絲、Gymnopédie)

### 配對狀態
- Alice ↔ Bob: 月光奏鳴曲 (已接受)
- Alice ↔ Carol: 給愛麗絲 (待處理)
- Carol → Alice: Gymnopédie No.1 (已接受)

### 時區相容時段
- Alice (紐約) & Bob (倫敦):
  - 週二 下午2-4點 (紐約) = 晚上7-9點 (倫敦)

## 🔍 驗證要點

1. **探索結果正確性**
   - 只顯示練習相同曲目的用戶
   - 已配對的不重複顯示
   - 時區差異計算正確

2. **通知系統運作**
   - 發送請求後對方收到通知
   - 接受/拒絕後發送方收到通知
   - 通知內容包含所有必要資訊

3. **時區轉換準確**
   - 顯示雙方當地時間
   - UTC 時間作為參考
   - 重疊時段計算正確

## 💡 測試提示

- 使用不同帳號測試完整流程
- 檢查通知是否即時送達
- 驗證時區轉換的準確性
- 測試邊界情況（如無重疊時段）

## 📱 前端整合注意事項

當整合到 React Native 前端時，需要：
1. 實作通知推送顯示
2. 加入時區選擇器
3. 建立可用時間的視覺化介面
4. 處理配對請求的即時更新

---

所有功能都已在後端完整實現並經過測試驗證！